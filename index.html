<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>PDV - Toca do Atleta</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: #f0f2f5; }
        .produtos { flex: 2; padding: 20px; overflow-y: auto; border-right: 2px solid #ddd; }
        .sacola { flex: 1; padding: 20px; background: white; display: flex; flex-direction: column; }
        h2 { color: #d32f2f; margin-top: 0; }
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #d32f2f; color: white; }
        .btn-add { background: #2e7d32; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
        .btn-add:hover { background: #1b5e20; }
        
        /* Estilo da Sacola */
        .item-sacola { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ccc; font-size: 14px; }
        .total-box { margin-top: auto; padding-top: 20px; border-top: 3px solid #d32f2f; }
        .linha-total { display: flex; justify-content: space-between; font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .desconto-input { width: 80px; padding: 5px; margin-left: 10px; }
        .btn-limpar { background: #666; color: white; border: none; width: 100%; padding: 10px; cursor: pointer; border-radius: 5px; }
        .val-final { color: #d32f2f; font-size: 24px; }
    </style>
</head>
<body>

<div class="produtos">
    <h2>Toca do Atleta - Produtos</h2>
    <input type="text" id="busca" onkeyup="filtrar()" placeholder="Buscar produto...">
    <table id="tabela">
        <thead>
            <tr>
                <th>Produto</th>
                <th>Preço</th>
                <th>Ação</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Whey Protein Max 900g</td><td>149.90</td><td><button class="btn-add" onclick="add('Whey Max', 149.90)">+</button></td></tr>
            <tr><td>Creatina Pura 300g</td><td>89.00</td><td><button class="btn-add" onclick="add('Creatina 300g', 89.00)">+</button></td></tr>
            <tr><td>Camisa Dry Fit (M)</td><td>55.00</td><td><button class="btn-add" onclick="add('Camisa Dry Fit', 55.00)">+</button></td></tr>
            <tr><td>Meia Cano Curto</td><td>29.90</td><td><button class="btn-add" onclick="add('Meia', 29.90)">+</button></td></tr>
        </tbody>
    </table>
</div>

<div class="sacola">
    <h2>Sacola de Venda</h2>
    <div id="lista-sacola" style="flex-grow: 1; overflow-y: auto;">
        </div>

    <div class="total-box">
        <div class="linha-total">Subtotal: <span id="subtotal">R$ 0,00</span></div>
        <div class="linha-total" style="font-size: 14px; color: #666;">
            Desconto (%): <input type="number" id="desc-porcent" class="desconto-input" value="0" oninput="calcularTudo()">
        </div>
        <div class="linha-total">Total: <span id="total-final" class="val-final">R$ 0,00</span></div>
        <button class="btn-limpar" onclick="limpar()">Limpar Sacola</button>
    </div>
</div>

<script>
    let itensSacola = [];

    function filtrar() {
        let input = document.getElementById("busca").value.toLowerCase();
        let rows = document.getElementById("tabela").getElementsByTagName("tr");
        for (let i = 1; i < rows.length; i++) {
            rows[i].style.display = rows[i].innerText.toLowerCase().includes(input) ? "" : "none";
        }
    }

    function add(nome, preco) {
        itensSacola.push({nome, preco});
        renderSacola();
    }

    function renderSacola() {
        const lista = document.getElementById("lista-sacola");
        lista.innerHTML = "";
        itensSacola.forEach((item, index) => {
            lista.innerHTML += `<div class="item-sacola"><span>${item.nome}</span> <b>R$ ${item.preco.toFixed(2)}</b></div>`;
        });
        calcularTudo();
    }

    function calcularTudo() {
        let subtotal = itensSacola.reduce((acc, item) => acc + item.preco, 0);
        let desc = document.getElementById("desc-porcent").value;
        let total = subtotal - (subtotal * (desc / 100));

        document.getElementById("subtotal").innerText = `R$ ${subtotal.toFixed(2)}`;
        document.getElementById("total-final").innerText = `R$ ${total.toFixed(2)}`;
    }

    function limpar() {
        itensSacola = [];
        document.getElementById("desc-porcent").value = 0;
        renderSacola();
    }
</script>

</body>
</html>
